<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rétro-planning Électoral - CGT</title>
    
    <!-- Chargez React et ReactDOM via CDN -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>
    
    <!-- Babel pour le JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  </head>
  <body>
    <!-- Menu de navigation -->
    <nav class="bg-red-700 text-white p-4">
      <ul class="flex justify-center space-x-4">
        <li><a href="index.html" class="hover:text-red-200">Accueil</a></li>
        <li><a href="carto.html" class="hover:text-red-200">Cartographie</a></li>
        <li><a href="retroplanning.html" class="hover:text-red-200">Rétro-planning</a></li>
        <li><a href="methode.html" class="hover:text-red-200">Méthode</a></li>
        <li><a href="assemblee.html" class="hover:text-red-200">Assemblées</a></li>
        <li><a href="syndicalisation.html" class="hover:text-red-200">Syndicalisation</a></li>
        <li><a href="resultats.html" class="hover:text-red-200">Résultats</a></li>
        <li><a href="demarcherevendicative.html" class="hover:text-red-200">Démarche</a></li>
      </ul>
    </nav>

    <!-- Conteneur principal pour le composant React -->
    <main id="app-container" class="container mx-auto p-6">
      <!-- Votre composant React sera monté ici -->
    </main>

    <!-- Pied de page -->
    <footer class="bg-gray-800 text-white text-center p-4">
      <p>&copy; 2025 CGT - Outil de point d'étape sur la syndicalisation</p>
    </footer>

    <!-- Chargement du script React directement dans le HTML -->
    <script type="text/babel">
      const { useState } = React;

      const RetroplanningModule = () => {
        const [electionDate, setElectionDate] = useState('');
        const [steps, setSteps] = useState([]);
        
        const defaultSteps = [
          {
            offset: -12,
            title: 'Préparation',
            description: 'Organisation initiale et définition des fondamentaux.'
          },
          {
            offset: -9,
            title: 'Planification Ciblée',
            description: 'Définition du plan de travail "cousu main".'
          },
          {
            offset: -6,
            title: 'Formation-action',
            description: 'Formation du syndicat, rétro-planning en 3 temps.'
          },
          {
            offset: -4,
            title: 'Déploiement Terrain',
            description: 'Mise en œuvre des visites, communication offensive.'
          },
          {
            offset: -3,
            title: '1ère Étape : Besoins',
            description: 'AG Syndiqués - Déploiement des syndiqués au plus près des salariés pour recueillir les besoins.'
          },
          {
            offset: -2,
            title: '2ème Étape : Revendications',
            description: 'AG Syndiqués - Bilan besoins, élaboration et décisions démocratiques de la plateforme revendicative et des listes.'
          },
          {
            offset: -1,
            title: '3ème Étape : Mobilisation',
            description: 'AG Salariés - Pointage des syndiqués avec désignation nominative des salariés à convaincre dans leur proximité.'
          }
        ];
        
        const calculateDates = () => {
          if (!electionDate) {
            alert('Veuillez sélectionner une date d\'élection');
            return;
          }
          
          const election = new Date(electionDate);
          const calculatedSteps = defaultSteps.map(step => {
            const stepDate = new Date(election);
            stepDate.setMonth(election.getMonth() + step.offset);
            return {
              ...step,
              date: stepDate.toLocaleDateString('fr-FR')
            };
          });
          
          setSteps(calculatedSteps);
        };

        return (
          <div className="p-4 bg-white rounded shadow-lg">
            <h2 className="text-xl font-bold text-red-600 mb-4">Module de Rétro-planning Électoral</h2>
            <p className="mb-4">Entrez la date prévue des élections professionnelles pour obtenir un calendrier personnalisé</p>
            
            <div className="flex gap-4 mb-6">
              <div className="flex flex-col flex-grow">
                <label htmlFor="electionDate" className="mb-2 font-medium">Date de l'élection :</label>
                <input 
                  type="date" 
                  id="electionDate"
                  className="border p-2 rounded" 
                  value={electionDate}
                  onChange={(e) => setElectionDate(e.target.value)}
                />
              </div>
              <button 
                onClick={calculateDates}
                className="bg-red-600 text-white px-4 py-2 rounded self-end hover:bg-red-700 transition"
              >
                Calculer le rétro-planning
              </button>
            </div>
            
            {steps.length > 0 && (
              <div className="mt-6">
                <h3 className="text-lg font-semibold mb-4">Plan de travail en {steps.length} étapes</h3>
                
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  {steps.map((step, index) => (
                    <div key={index} className="bg-gray-50 p-4 rounded shadow">
                      <div className="w-10 h-10 bg-red-600 text-white rounded-full flex items-center justify-center mb-2 mx-auto">
                        {index + 1}
                      </div>
                      <p className="text-gray-500 text-center mb-2">{step.date}</p>
                      <h4 className="text-red-600 font-semibold text-center mb-2">{step.title}</h4>
                      <p className="text-sm text-gray-700">{step.description}</p>
                    </div>
                  ))}
                </div>
                
                <div className="bg-red-50 p-4 rounded mt-6 border-l-4 border-red-600">
                  <h4 className="font-semibold mb-2">Rétro-planning de la démarche : une école de la démocratie</h4>
                  <p className="text-gray-700">
                    Ce plan de travail s'inscrit dans une démarche globale liant élections, syndicalisation et mobilisation. 
                    Chaque étape renforce votre capacité à déployer efficacement l'action syndicale.
                  </p>
                </div>
              </div>
            )}
          </div>
        );
      };

      // Rendu du composant React
      ReactDOM.render(
        <RetroplanningModule />,
        document.getElementById('app-container')
      );
    </script>
  </body>
</html>